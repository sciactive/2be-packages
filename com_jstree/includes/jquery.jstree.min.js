(function(){if(!jQuery||!jQuery.jstree){var o=!1,p=!1,q=!1;(function(b){b.vakata={};b.vakata.css={get_css:function(a,b,c){var a=a.toLowerCase(),d=c.cssRules||c.rules,e=0;do{if(d.length&&e>d.length+5)break;if(d[e].selectorText&&d[e].selectorText.toLowerCase()==a)return b===!0?(c.removeRule&&c.removeRule(e),c.deleteRule&&c.deleteRule(e),!0):d[e]}while(d[++e]);return!1},add_css:function(a,c){if(b.jstree.css.get_css(a,!1,c))return!1;c.insertRule?c.insertRule(a+" { }",0):c.addRule(a,null,0);return b.vakata.css.get_css(a)},
remove_css:function(a,c){return b.vakata.css.get_css(a,!0,c)},add_sheet:function(a){var c=!1,d=!0;if(a.str)return a.title&&(c=b("style[id='"+a.title+"-stylesheet']")[0]),c?d=!1:(c=document.createElement("style"),c.setAttribute("type","text/css"),a.title&&c.setAttribute("id",a.title+"-stylesheet")),c.styleSheet?d?(document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet.cssText=a.str):c.styleSheet.cssText=c.styleSheet.cssText+" "+a.str:(c.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(c)),
c.sheet||c.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(e){}else return c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.media="all",c.href=a.url,document.getElementsByTagName("head")[0].appendChild(c),c.styleSheet}};var a=[],d=-1,e={},c={};b.fn.jstree=function(f){var c=typeof f=="string",d=Array.prototype.slice.call(arguments,1),h=this;if(c){if(f.substring(0,1)=="_")return h;this.each(function(){var c=a[b.data(this,"jstree-instance-id")],
c=c&&b.isFunction(c[f])?c[f].apply(c,d):c;if(typeof c!=="undefined"&&(f.indexOf("is_")===0||c!==!0&&c!==!1))return h=c,!1})}else this.each(function(){var c=b.data(this,"jstree-instance-id"),g=[],h=f?b.extend({},!0,f):{},l=b(this),n=!1,r=[],g=g.concat(d);l.data("jstree")&&g.push(l.data("jstree"));h=g.length?b.extend.apply(null,[!0,h].concat(g)):h;typeof c!=="undefined"&&a[c]&&a[c].destroy();c=parseInt(a.push({}),10)-1;b.data(this,"jstree-instance-id",c);h.plugins=b.isArray(h.plugins)?h.plugins:b.jstree.defaults.plugins.slice();
h.plugins.unshift("core");h.plugins=h.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");n=b.extend(!0,{},b.jstree.defaults,h);n.plugins=h.plugins;b.each(e,function(a){b.inArray(a,n.plugins)===-1?(n[a]=null,delete n[a]):r.push(a)});n.plugins=r;a[c]=new b.jstree._instance(c,b(this).addClass("jstree jstree-"+c),n);b.each(a[c]._get_settings().plugins,function(b,f){a[c].data[f]={}});b.each(a[c]._get_settings().plugins,function(b,f){e[f]&&
e[f].__init.apply(a[c])});setTimeout(function(){a[c].init()},0)});return h};b.jstree={defaults:{plugins:[]},_focused:function(){return a[d]||null},_reference:function(f){if(a[f])return a[f];var c=b(f);!c.length&&typeof f==="string"&&(c=b("#"+f));if(!c.length)return null;return a[c.closest(".jstree").data("jstree-instance-id")]||null},_instance:function(a,c,d){this.data={core:{}};this.get_settings=function(){return b.extend(!0,{},d)};this._get_settings=function(){return d};this.get_index=function(){return a};
this.get_container=function(){return c};this.get_container_ul=function(){return c.children("ul:eq(0)")};this._set_settings=function(a){d=b.extend(!0,{},d,a)}},_fn:{},plugin:function(a,c){c=b.extend({},{__init:b.noop,__destroy:b.noop,_fn:{},defaults:!1},c);e[a]=c;b.jstree.defaults[a]=c.defaults;b.each(c._fn,function(c,d){d.plugin=a;d.old=b.jstree._fn[c];b.jstree._fn[c]=function(){var a,f=d,e=Array.prototype.slice.call(arguments);a=new b.Event("before.jstree");var g=!1;if(!(this.data.core.locked===
!0&&c!=="unlock"&&c!=="is_locked")){do{if(f&&f.plugin&&b.inArray(f.plugin,this._get_settings().plugins)!==-1)break;f=f.old}while(f);if(f){if(c.indexOf("_")===0)a=f.apply(this,e);else{a=this.get_container().triggerHandler(a,{func:c,inst:this,args:e,plugin:f.plugin});if(a===!1)return;typeof a!=="undefined"&&(e=a);a=f.apply(b.extend({},this,{__callback:function(a){this.get_container().triggerHandler(c+".jstree",{inst:this,args:e,rslt:a,rlbk:g})},__rollback:function(){return g=this.get_rollback()},__call_old:function(a){return f.old.apply(this,
a?Array.prototype.slice.call(arguments,1):e)}}),e)}return a}}};b.jstree._fn[c].old=d.old;b.jstree._fn[c].plugin=a})},rollback:function(f){f&&(b.isArray(f)||(f=[f]),b.each(f,function(b,f){a[f.i].set_rollback(f.h,f.d)}))}};b.jstree._fn=b.jstree._instance.prototype={};b(function(){var a=navigator.userAgent.toLowerCase(),c=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],d=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&parseInt(c,10)==6){o=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}d+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
parseInt(c,10)==7&&(p=!0,d+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&parseFloat(c,10)<1.9&&(q=!0,d+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");b.vakata.css.add_sheet({str:d,title:"jstree"})});b.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",b.proxy(function(a){var c=b(a.target);c.is("ins")&&a.pageY-c.offset().top<this.data.core.li_height&&this.toggle_node(c)},this)).bind("mousedown.jstree",b.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var a;if(document.selection&&document.selection.empty)document.selection.empty();
else if(window.getSelection){a=window.getSelection();try{a.removeAllRanges(),a.collapse()}catch(b){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",b.proxy(function(a,c){var d=this._get_node(c.rslt.obj),e=this;d===-1&&(d=this.get_container_ul());d.length&&d.find("li").each(function(){var a=b(this);a.data("jstree")&&b.each(a.data("jstree"),function(f,c){e.data[f]&&b.isFunction(e["_"+f+"_notify"])&&e["_"+f+"_notify"].call(e,a,c)})})},this));this._get_settings().core.load_open&&
this.get_container().bind("load_node.jstree",b.proxy(function(a,c){var d=this._get_node(c.rslt.obj),e=this;d===-1&&(d=this.get_container_ul());d.length&&d.find("li.jstree-open:not(:has(ul))").each(function(){e.load_node(this,b.noop,b.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var f,c=this.get_index(),j=this._get_settings(),h=this;b.each(j.plugins,function(a,b){try{e[b].__destroy.apply(h)}catch(f){}});this.__callback();if(this.is_focused())for(f in a)if(a.hasOwnProperty(f)&&
f!=c){a[f].set_focus();break}c===d&&(d=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree-instance-id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});b(document).unbind(".jstree-"+c).undelegate(".jstree-"+c);a[c]=null;delete a[c]},_core_notify:function(a,b){b.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var c=this,d=!0,e=[],k=[];if(!a&&(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=b.map(b.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=b.map(b.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length))this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open);if(this.data.core.to_load.length&&(b.each(this.data.core.to_load,function(a,c){if(c=="#")return!0;b(c).length?e.push(c):k.push(c)}),e.length))this.data.core.to_load=k,b.each(e,function(a,b){c._is_loaded(b)||(c.load_node(b,function(){c.reload_nodes(!0)},function(){c.reload_nodes(!0)}),
d=!1)});this.data.core.to_open.length&&b.each(this.data.core.to_open,function(a,b){c.open_node(b,!1,!0)});if(d)this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){c.__callback({},c)},50),this.data.core.refreshing=!1,this.reopen()},reopen:function(){var a=this;this.data.core.to_open.length&&b.each(this.data.core.to_open,function(b,c){a.open_node(c,!1,!0)});this.__callback({})},refresh:function(a){var b=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);a!==-1?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){b.__callback({obj:a});b.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=b.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");d=this.get_index();this.__callback()}},is_focused:function(){return d==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),d=
-1);this.__callback()},_get_node:function(a){var c=b(a,this.get_container());if(c.is(".jstree")||a==-1)return-1;c=c.closest("li",this.get_container());return c.length?c:!1},_get_next:function(a,b){a=this._get_node(a);if(a===-1)return this.get_container().find("> ul > li:first-child");if(!a.length)return!1;if(b)return a.nextAll("li").size()>0?a.nextAll("li:eq(0)"):!1;return a.hasClass("jstree-open")?a.find("li:eq(0)"):a.nextAll("li").size()>0?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0)},
_get_prev:function(a,b){a=this._get_node(a);if(a===-1)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(b)return a.prevAll("li").length>0?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}else{var c=a.parentsUntil(".jstree","li:eq(0)");return c.length?c:!1}},_get_parent:function(a){a=this._get_node(a);if(a==-1||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");
return a.length?a:-1},_get_children:function(a){a=this._get_node(a);if(a===-1)return this.get_container().children("ul:eq(0)").children("li");if(!a.length)return!1;return a.children("ul:eq(0)").children("li")},get_path:function(a,b){var c=[],d=this,a=this._get_node(a);if(a===-1||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){c.push(b?this.id:d.get_text(this))});c.reverse();c.push(b?a.attr("id"):this.get_text(a));return c},_get_string:function(a){return this._get_settings().core.strings[a]||
a},is_open:function(a){return(a=this._get_node(a))&&a!==-1&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&a!==-1&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&a!==-1&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||a===-1)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,b,c){a=this._get_node(a);if(!a.length)return!1;
if(!a.hasClass("jstree-closed"))return b&&b.call(),!1;var d=c||o?0:this._get_settings().core.animation,e=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){e.open_node(this,!1,!0)}),d&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),d?a.children("ul").stop(!0,!0).slideDown(d,function(){this.style.display="";e.after_open(a)}):e.after_open(a),
this.__callback({obj:a}),b&&b.call()):(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){e.open_node(a,b,c)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,b){var a=this._get_node(a),c=b||o?0:this._get_settings().core.animation,d=this;if(!a.length||!a.hasClass("jstree-open"))return!1;c&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");c?a.children("ul").stop(!0,!0).slideUp(c,function(){this.style.display=
"";d.after_close(a)}):d.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,b,c){a=a?this._get_node(a):-1;if(!a||a===-1)a=this.get_container_ul();c?a=a.find("li.jstree-closed"):(c=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var d=this;a.each(function(){var a=
this;d._is_loaded(this)?d.open_node(this,!1,!b):d.open_node(this,function(){d.open_all(a,b,c)},!b)});c.find("li.jstree-closed").length===0&&this.__callback({obj:c})},close_all:function(a,b){var c=this,a=a?this._get_node(a):this.get_container();if(!a||a===-1)a=this.get_container_ul();a.find("li.jstree-open").andSelf().each(function(){c.close_node(this,!b)});this.__callback({obj:a})},clean_node:function(a){a=a&&a!=-1?b(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,b){this.get_container().empty().append(a);this.data=b;this.__callback()},load_node:function(a){this.__callback({obj:a})},_is_loaded:function(){return!0},create_node:function(a,c,d,e,k){var a=this._get_node(a),c=typeof c==="undefined"?"last":
c,i=b("<li />"),m=this._get_settings().core,l;if(a!==-1&&!a.length)return!1;if(!k&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,c,d,e,!0)}),!1;this.__rollback();typeof d==="string"&&(d={data:d});d||(d={});d.attr&&i.attr(d.attr);d.metadata&&i.data(d.metadata);d.state&&i.addClass("jstree-"+d.state);if(!d.data)d.data=this._get_string("new_node");if(!b.isArray(d.data))l=d.data,d.data=[],d.data.push(l);b.each(d.data,function(a,c){l=b("<a />");b.isFunction(c)&&(c=c.call(this,
d));if(typeof c=="string")l.attr("href","#")[m.html_titles?"html":"text"](c);else{if(!c.attr)c.attr={};if(!c.attr.href)c.attr.href="#";l.attr(c.attr)[m.html_titles?"html":"text"](c.title);c.language&&l.addClass(c.language)}l.prepend("<ins class='jstree-icon'>&#160;</ins>");c.icon&&(c.icon.indexOf("/")===-1?l.children("ins").addClass(c.icon):l.children("ins").css("background","url('"+c.icon+"') center center no-repeat"));i.append(l)});i.prepend("<ins class='jstree-icon'>&#160;</ins>");a===-1&&(a=this.get_container(),
c==="before"&&(c="first"),c==="after"&&(c="last"));switch(c){case "before":a.before(i);l=this._get_parent(a);break;case "after":a.after(i);l=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(i);l=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(i);l=a;break;default:a.children("ul").length||a.append("<ul />"),c||(c=0),l=a.children("ul").children("li").eq(c),l.length?l.before(i):a.children("ul").append(i),
l=a}if(l===-1||l.get(0)===this.get_container().get(0))l=-1;this.clean_node(l);this.__callback({obj:i,parent:l});e&&e.call(this,i);return i},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles,a=a.children("a:eq(0)");return b?(a=a.clone(),a.children("INS").remove(),a.html()):(a=a.contents().filter(function(){return this.nodeType==3})[0],a.nodeValue)},set_text:function(a,b){a=this._get_node(a);if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var c=
a.children("INS").clone();a.html(b).prepend(c);this.__callback({obj:a,name:b});return!0}else return a=a.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:a,name:b}),a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.__rollback();var c=this._get_parent(a),d=b([]),
e=this;a.each(function(){d=d.add(e._get_prev(this))});a=a.detach();c!==-1&&c.find("> ul > li").length===0&&c.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(c);this.__callback({obj:a,prev:d,parent:c});return a},prepare_move:function(a,d,e,h,k){var i={};i.ot=b.jstree._reference(a)||this;i.o=i.ot._get_node(a);i.r=d===-1?-1:this._get_node(d);i.p=typeof e==="undefined"||e===!1?"last":e;if(k||!c.o||!(c.o[0]===i.o[0]&&c.r[0]===i.r[0]&&c.p===i.p)){i.ot=b.jstree._reference(i.o)||
this;i.rt=b.jstree._reference(i.r)||this;if(i.r===-1||!i.r)switch(i.cr=-1,i.p){case "first":case "before":case "inside":i.cp=0;break;case "after":case "last":i.cp=i.rt.get_container().find(" > ul > li").length;break;default:i.cp=i.p}else{if(!/^(before|after)$/.test(i.p)&&!this._is_loaded(i.r))return this.load_node(i.r,function(){this.prepare_move(a,d,e,h,!0)});switch(i.p){case "before":i.cp=i.r.index();i.cr=i.rt._get_parent(i.r);break;case "after":i.cp=i.r.index()+1;i.cr=i.rt._get_parent(i.r);break;
case "inside":case "first":i.cp=0;i.cr=i.r;break;case "last":i.cp=i.r.find(" > ul > li").length;i.cr=i.r;break;default:i.cp=i.p,i.cr=i.r}}i.np=i.cr==-1?i.rt.get_container():i.cr;i.op=i.ot._get_parent(i.o);i.cop=i.o.index();if(i.op===-1)i.op=i.ot?i.ot.get_container():this.get_container();!/^(before|after)$/.test(i.p)&&i.op&&i.np&&i.op[0]===i.np[0]&&i.o.index()<i.cp&&i.cp++;i.or=i.np.find(" > ul > li:nth-child("+(i.cp+1)+")");c=i}this.__callback(c);h&&h.call(this,c)},check_move:function(){var a=c,b=
!0,d=a.r===-1?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0])return!1;if(a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(d.parentsUntil(".jstree","li").andSelf().index(this)!==-1)return b=!1});return b},move_node:function(a,d,e,h,k,i){if(!k)return this.prepare_move(a,d,e,function(a){this.move_node(a,!1,!1,h,!0,i)});if(h)c.cy=!0;if(!i&&!this.check_move())return!1;this.__rollback();d=!1;h?(d=a.o.clone(!0),d.find("*[id]").andSelf().each(function(){if(this.id)this.id=
"copy_"+this.id})):d=a.o;a.or.length?a.or.before(d):(a.np.children("ul").length||b("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(d));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(m){}if(h)c.cy=!0,c.oc=d;this.__callback(c);return c},_get_move:function(){return c}}})})(jQuery);(function(b){var a,d,e;b(function(){/msie/.test(navigator.userAgent.toLowerCase())?
(d=b('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),e=b('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=d.width()-e.width(),d.add(e).remove()):(d=b("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),a=100-d.width(),d.parent().remove())});b.jstree.plugin("ui",
{__init:function(){this.data.ui.selected=b();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",b.proxy(function(a){a.preventDefault();a.currentTarget.blur();b(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||this.hover_node(a.target)},this)).delegate("a",
"mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",b.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",b.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",b.proxy(function(){this.reselect()},this)).bind("close_node.jstree",b.proxy(function(a,d){var e=this._get_settings().ui,j=this._get_node(d.rslt.obj),h=j&&j.length?j.children("ul").find("a.jstree-clicked"):
b(),k=this;e.selected_parent_close!==!1&&h.length&&h.each(function(){k.deselect_node(this);e.selected_parent_close==="select_parent"&&k.select_node(j)})},this)).bind("delete_node.jstree",b.proxy(function(a,b){var d=this._get_settings().ui.select_prev_on_delete,e=this._get_node(b.rslt.obj),e=e&&e.length?e.find("a.jstree-clicked"):[],h=this;e.each(function(){h.deselect_node(this)});d&&e.length&&b.rslt.prev.each(function(){if(this.parentNode)return h.select_node(this),!1})},this)).bind("move_node.jstree",
b.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,d){if(typeof a==="undefined"||a===null)return d?this.data.ui.selected:this.data.ui.last_selected;var e=b(a,this.get_container());if(e.is(".jstree")||
a==-1)return-1;e=e.closest("li",this.get_container());return e.length?e:!1},_ui_notify:function(a,b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var a=this,d=this.data.ui.to_select,
d=b.map(b.makeArray(d),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});b.each(d,function(b,d){d&&d!=="#"&&a.select_node(d)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||
this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered;if(!a||!a.length)return!1;if(this.data.ui.hovered[0]===a.children("a").removeClass("jstree-hovered").parent()[0])this.data.ui.hovered=null;this.__callback({obj:a})},select_node:function(a,b,d){a=this._get_node(a);if(a==-1||!a||!a.length)return!1;var e=this._get_settings().ui,h=e.select_multiple_modifier=="on"||
e.select_multiple_modifier!==!1&&d&&d[e.select_multiple_modifier+"Key"],k=e.select_range_modifier!==!1&&d&&d[e.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],i=this.is_selected(a),m=!0,l=this;if(b){if(e.disable_selecting_children&&h&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;m=!1;switch(!0){case k:this.data.ui.last_selected.addClass("jstree-last-selected");
a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();e.select_limit==-1||a.length<e.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),i=!1,m=!0):m=!1;break;case i&&!h:this.deselect_all();i=!1;m=!0;break;case !i&&!h:if(e.select_limit==-1||e.select_limit>0)this.deselect_all(),m=!0;break;case i&&h:this.deselect_node(a);break;
case !i&&h:if(e.select_limit==-1||this.data.ui.selected.length+1<=e.select_limit)m=!0}}if(m&&!i){if(!k)this.data.ui.last_selected=a;a.children("a").addClass("jstree-clicked");e.selected_parent_open&&a.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)});this.data.ui.selected=this.data.ui.selected.add(a);this._fix_scroll(a.eq(0));this.__callback({obj:a,e:d})}},_fix_scroll:function(b){var d=this.get_container()[0];if(d.scrollHeight>d.offsetHeight&&(b=this._get_node(b))&&!(b===-1||!b.length||
!b.is(":visible"))){b=b.offset().top-this.get_container().offset().top;if(b<0)d.scrollTop=d.scrollTop+b-1;if(b+this.data.core.li_height+(d.scrollWidth>d.offsetWidth?a:0)>d.offsetHeight)d.scrollTop+=b-d.offsetHeight+this.data.core.li_height+1+(d.scrollWidth>d.offsetWidth?a:0)}},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;if(this.is_selected(a)){a.children("a").removeClass("jstree-clicked");this.data.ui.selected=this.data.ui.selected.not(a);if(this.data.ui.last_selected.get(0)===
a.get(0))this.data.ui.last_selected=this.data.ui.selected.eq(0);this.__callback({obj:a})}},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return this.data.ui.selected.index(this._get_node(a))>=0},get_selected:function(a){return a?b(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?b(a).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();
a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=b([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});b.jstree.defaults.plugins.push("ui")})(jQuery);(function(b){b.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",b.proxy(function(a,b){if(this._get_settings().crrm.move.open_onmove){var e=this;b.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){e.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,
move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(a,d){var a=this._get_node(a),e=this._get_settings().core.rtl,c=this._get_settings().crrm.input_width_limit,f=a.children("ins").width(),g=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,j=this.get_text(a),h=b("<div />",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),k=a.css("position","relative").append(b("<input />",
{value:j,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:e?"auto":f+g+4+"px",right:e?f+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:b.proxy(function(){var b=a.children(".jstree-rename-input"),c=b.val();c===""&&(c=j);h.remove();b.remove();this.set_text(a,j);this.rename_node(a,c);d.call(this,a,c,j);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;a==
27?(this.value=j,this.blur()):a==13?this.blur():k.width(Math.min(h.text("pW"+this.value).width(),c))},keypress:function(a){if((a.keyCode||a.which)==13)return!1}})).children(".jstree-rename-input");this.set_text(a,"");h.css({fontFamily:k.css("fontFamily")||"",fontSize:k.css("fontSize")||"",fontWeight:k.css("fontWeight")||"",fontStyle:k.css("fontStyle")||"",fontStretch:k.css("fontStretch")||"",fontVariant:k.css("fontVariant")||"",letterSpacing:k.css("letterSpacing")||"",wordSpacing:k.css("wordSpacing")||
""});k.width(Math.min(h.text("pW"+k[0].value).width(),c))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var b=this.__callback;this._show_input(a,function(a,c,f){b.call(this,{obj:a,new_name:c,old_name:f})})},create:function(a,d,e,c,f){var g=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,d,e,function(a){var d=this._get_parent(a),e=b(a).index();c&&c.call(this,a);d.length&&d.hasClass("jstree-closed")&&this.open_node(d,!1,!0);f?g.__callback({obj:a,
name:this.get_text(a),parent:d,position:e}):this._show_input(a,function(a,b){g.__callback({obj:a,name:b,parent:d,position:e})})})},remove:function(a){var a=this._get_node(a,!0),b=this._get_parent(a),e=this._get_prev(a);this.__rollback();a=this.delete_node(a);a!==!1&&this.__callback({obj:a,prev:e,parent:b})},check_move:function(){if(!this.__call_old())return!1;if(!this._get_settings().crrm.move.check_move.call(this,this._get_move()))return!1;return!0},move_node:function(a,b,e,c,f,g){var j=this._get_settings().crrm.move;
if(!f){if(typeof e==="undefined")e=j.default_position;if(e==="inside"&&!j.default_position.match(/^(before|after)$/))e=j.default_position;return this.__call_old(!0,a,b,e,c,!1,g)}if(j.always_copy===!0||j.always_copy==="multitree"&&a.rt.get_index()!==a.ot.get_index())c=!0;this.__call_old(!0,a,b,e,c,!0,g)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;
this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var b=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;if(this.data.crrm.ct_nodes)this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:b})}}})})(jQuery);(function(b){var a=
[];b.jstree._themes=!1;b.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",b.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",b.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(d,e){if(!d)return!1;
e||(e=b.jstree._themes+d+"/style.css");b.inArray(e,a)==-1&&(b.vakata.css.add_sheet({url:e}),a.push(e));if(this.data.themes.theme!=d)this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=d;this.get_container().addClass("jstree-"+d);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},
hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});
b(function(){b.jstree._themes===!1&&b("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return b.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});if(b.jstree._themes===!1)b.jstree._themes="themes/"});b.jstree.defaults.plugins.push("themes")})(jQuery);(function(b){b.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,
b){b.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,b,e){var c=this;this.load_node_json(a,function(){c.__callback({obj:c._get_node(a)});b.call(this)},e)},_is_loaded:function(a){var d=this._get_settings().json_data,a=this._get_node(a);return a==-1||!a||!d.ajax&&!d.progressive_render&&!b.isFunction(d.data)||a.is(".jstree-open, .jstree-leaf")||a.children("ul").children("li").length>0},refresh:function(a){var a=
this._get_node(a),d=this._get_settings().json_data;a&&a!==-1&&d.progressive_unload&&(b.isFunction(d.data)||d.ajax)&&a.removeData("jstree-children");return this.__call_old()},load_node_json:function(a,d,e){var c=this.get_settings().json_data,f,g=function(){};f=function(){};if((a=this._get_node(a))&&a!==-1&&(c.progressive_render||c.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&a.children("ul").children("li").length===0&&a.data("jstree-children")){if(f=this._parse_json(a.data("jstree-children"),
a))a.append(f),c.progressive_unload||a.removeData("jstree-children");this.clean_node(a);d&&d.call(this)}else{if(a&&a!==-1)if(a.data("jstree-is-loading"))return;else a.data("jstree-is-loading",!0);switch(!0){case !c.data&&!c.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(c.data):c.data.call(this,a,b.proxy(function(b){(b=this._parse_json(b,a))?(a===-1||!a?this.get_container().children("ul").empty().append(b.children()):(a.append(b).children("a.jstree-loading").removeClass("jstree-loading"),
a.removeData("jstree-is-loading")),this.clean_node(a),d&&d.call(this)):(a===-1||!a?c.correct_state&&this.get_container().children("ul").empty():(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),c.correct_state&&this.correct_state(a)),e&&e.call(this))},this));break;case !!c.data&&!c.ajax||!!c.data&&!!c.ajax&&(!a||a===-1):if(!a||a==-1)(f=this._parse_json(c.data,a))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):c.correct_state&&
this.get_container().children("ul").empty();d&&d.call(this);break;case !c.data&&!!c.ajax||!!c.data&&!!c.ajax&&a&&a!==-1:g=function(b,d,f){var i=this.get_settings().json_data.ajax.error;i&&i.call(this,b,d,f);a!=-1&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),d==="success"&&c.correct_state&&this.correct_state(a)):d==="success"&&c.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)};c.ajax.context=this;c.ajax.error=g;
c.ajax.success=function(e,f,k){var i=this.get_settings().json_data.ajax.success;i&&(e=i.call(this,e,f,k)||e);if(e===""||e&&e.toString&&e.toString().replace(/^[\s\n]+$/,"")===""||!b.isArray(e)&&!b.isPlainObject(e))return g.call(this,k,f,"");(e=this._parse_json(e,a))?(a===-1||!a?this.get_container().children("ul").empty().append(e.children()):(a.append(e).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading")),this.clean_node(a),d&&d.call(this)):a===-1||!a?c.correct_state&&
(this.get_container().children("ul").empty(),d&&d.call(this)):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),c.correct_state&&(this.correct_state(a),d&&d.call(this)))};if(!c.ajax.dataType)c.ajax.dataType="json";if(b.isFunction(c.ajax.url))c.ajax.url=c.ajax.url.call(this,a);if(b.isFunction(c.ajax.data))c.ajax.data=c.ajax.data.call(this,a);b.ajax(c.ajax)}}},_parse_json:function(a,d,e){var c=!1,f=this._get_settings(),g=f.json_data,j=f.core.html_titles,
h;if(!a)return c;g.progressive_unload&&d&&d!==-1&&d.data("jstree-children",c);if(b.isArray(a)){c=b();if(!a.length)return!1;f=0;for(g=a.length;f<g;f++)h=this._parse_json(a[f],d,!0),h.length&&(c=c.add(h))}else{typeof a=="string"&&(a={data:a});if(!a.data&&a.data!=="")return c;c=b("<li />");a.attr&&c.attr(a.attr);a.metadata&&c.data(a.metadata);a.state&&c.addClass("jstree-"+a.state);if(!b.isArray(a.data))h=a.data,a.data=[],a.data.push(h);b.each(a.data,function(d,e){h=b("<a />");b.isFunction(e)&&(e=e.call(this,
a));if(typeof e=="string")h.attr("href","#")[j?"html":"text"](e);else{if(!e.attr)e.attr={};if(!e.attr.href)e.attr.href="#";h.attr(e.attr)[j?"html":"text"](e.title);e.language&&h.addClass(e.language)}h.prepend("<ins class='jstree-icon'>&#160;</ins>");if(!e.icon&&a.icon)e.icon=a.icon;e.icon&&(e.icon.indexOf("/")===-1?h.children("ins").addClass(e.icon):h.children("ins").css("background","url('"+e.icon+"') center center no-repeat"));c.append(h)});c.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&
(g.progressive_render&&a.state!=="open"?c.addClass("jstree-closed").data("jstree-children",a.children):(g.progressive_unload&&c.data("jstree-children",a.children),b.isArray(a.children)&&a.children.length&&(h=this._parse_json(a.children,d,!0),h.length&&(d=b("<ul />"),d.append(h),c.append(d)))))}e||(e=b("<ul />"),e.append(c),c=e);return c},get_json:function(a,d,e,c){var f=[],g=this._get_settings(),j=this,h,k,i,m,l,n,a=this._get_node(a);if(!a||a===-1)a=this.get_container().find("> ul > li");d=b.isArray(d)?
d:["id","class"];!c&&this.data.types&&d.push(g.types.type_attr);e=b.isArray(e)?e:[];a.each(function(){i=b(this);h={data:[]};if(d.length)h.attr={};b.each(d,function(a,b){(k=i.attr(b))&&k.length&&k.replace(/jstree[^ ]*/ig,"").length&&(h.attr[b]=(" "+k).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});if(i.hasClass("jstree-open"))h.state="open";if(i.hasClass("jstree-closed"))h.state="closed";if(i.data())h.metadata=i.data();m=i.children("a");m.each(function(){l=
b(this);if(e.length||b.inArray("languages",g.plugins)!==-1||l.children("ins").get(0).style.backgroundImage.length||l.children("ins").get(0).className&&l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length){n=!1;b.inArray("languages",g.plugins)!==-1&&b.isArray(g.languages)&&g.languages.length&&b.each(g.languages,function(a,b){if(l.hasClass(b))return n=b,!1});k={attr:{},title:j.get_text(l,n)};b.each(e,function(a,b){k.attr[b]=(" "+(l.attr(b)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig,
" ").replace(/^ /,"").replace(/ $/,"")});b.inArray("languages",g.plugins)!==-1&&b.isArray(g.languages)&&g.languages.length&&b.each(g.languages,function(a,b){if(l.hasClass(b))return k.language=b,!0});if(l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length)k.icon=l.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");if(l.children("ins").get(0).style.backgroundImage.length)k.icon=l.children("ins").get(0).style.backgroundImage.replace("url(",
"").replace(")","")}else k=j.get_text(l);m.length>1?h.data.push(k):h.data=k});i=i.find("> ul > li");if(i.length)h.children=j.get_json(i,d,e,!0);f.push(h)});return f}}})})(jQuery);(function(b){b.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var d=this._get_settings().languages,e=!1,c=".jstree-"+this.get_index()+" a";if(!b.isArray(d)||d.length===0)return!1;if(b.inArray(a,d)==-1)if(d[a])a=d[a];else return!1;if(a==this.data.languages.current_language)return!0;
e=b.vakata.css.get_css(c+"."+this.data.languages.current_language,!1,this.data.languages.language_css);if(e!==!1)e.style.display="none";e=b.vakata.css.get_css(c+"."+a,!1,this.data.languages.language_css);if(e!==!1)e.style.display="";this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,d){var e=this._get_settings().languages,c=this._get_settings().core.strings;b.isArray(e)&&e.length&&(d=d&&b.inArray(d,
e)!=-1?d:this.data.languages.current_language);if(c[d]&&c[d][a])return c[d][a];if(c[a])return c[a];return a},get_text:function(a,d){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var e=this._get_settings().languages,c=this._get_settings().core.html_titles;b.isArray(e)&&e.length?(d=d&&b.inArray(d,e)!=-1?d:this.data.languages.current_language,a=a.children("a."+d)):a=a.children("a:eq(0)");return c?(a=a.clone(),a.children("INS").remove(),a.html()):(a=a.contents().filter(function(){return this.nodeType==
3})[0],a.nodeValue)},set_text:function(a,d,e){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var c=this._get_settings().languages,f=this._get_settings().core.html_titles;b.isArray(c)&&c.length?(e=e&&b.inArray(e,c)!=-1?e:this.data.languages.current_language,a=a.children("a."+e)):a=a.children("a:eq(0)");return f?(c=a.children("INS").clone(),a.html(d).prepend(c),this.__callback({obj:a,name:d,lang:e}),!0):(a=a.contents().filter(function(){return this.nodeType==3})[0],this.__callback({obj:a,
name:d,lang:e}),a.nodeValue=d)},_load_css:function(){var a=this._get_settings().languages,d="/* languages css */",e=".jstree-"+this.get_index()+" a",c;if(b.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(c=0;c<a.length;c++)d+=e+"."+a[c]+" {",a[c]!=this.data.languages.current_language&&(d+=" display:none; "),d+=" } ";this.data.languages.language_css=b.vakata.css.add_sheet({str:d,title:"jstree-languages"})}},create_node:function(a,d,e,c){return this.__call_old(!0,a,d,e,function(a){var d=
this._get_settings().languages,e=a.children("a"),h;if(b.isArray(d)&&d.length){for(h=0;h<d.length;h++)e.is("."+d[h])||a.append(e.eq(0).clone().removeClass(d.join(" ")).addClass(d[h]));e.not("."+d.join(", .")).remove()}c&&c.call(this,a)})}}})})(jQuery);(function(b){b.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",b.proxy(function(a,b){var e=this._get_node(b.rslt.obj),e=e===-1?this.get_container().children("ul"):e.children("ul");this.sort(e)},this)).bind("rename_node.jstree create_node.jstree create.jstree",
b.proxy(function(a,b){this.sort(b.rslt.obj.parent())},this)).bind("move_node.jstree",b.proxy(function(a,b){this.sort((b.rslt.np==-1?this.get_container():b.rslt.np).children("ul"))},this))},defaults:function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(a){var d=this._get_settings().sort,e=this;a.append(b.makeArray(a.children("li")).sort(b.proxy(d,e)));a.find("> li > ul").each(function(){e.sort(b(this))});this.clean_node(a)}}})})(jQuery);(function(b){var a=!1,d=!1,e=!1,c=!1,
f=!1,g=!1,j=!1,h=!1,k=!1;b.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,c,d){b.vakata.dnd.is_drag&&b.vakata.drag_stop({});try{if(a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style)a.currentTarget.style.MozUserSelect="none"}catch(e){}b.vakata.dnd.init_x=a.pageX;b.vakata.dnd.init_y=a.pageY;b.vakata.dnd.user_data=c;b.vakata.dnd.is_down=!0;b.vakata.dnd.helper=
b("<div id='vakata-dragged' />").html(d);b(document).bind("mousemove",b.vakata.dnd.drag);b(document).bind("mouseup",b.vakata.dnd.drag_stop);return!1},drag:function(a){if(b.vakata.dnd.is_down){if(!b.vakata.dnd.is_drag)if(Math.abs(a.pageX-b.vakata.dnd.init_x)>5||Math.abs(a.pageY-b.vakata.dnd.init_y)>5)b.vakata.dnd.helper.appendTo("body"),b.vakata.dnd.is_drag=!0,b(document).triggerHandler("drag_start.vakata",{event:a,data:b.vakata.dnd.user_data});else return;if(a.type==="mousemove"){var c=b(document),
d=c.scrollTop(),c=c.scrollLeft();a.pageY-d<20?(g&&j==="down"&&(clearInterval(g),g=!1),g||(j="up",g=setInterval(function(){b(document).scrollTop(b(document).scrollTop()-b.vakata.dnd.scroll_spd)},150))):g&&j==="up"&&(clearInterval(g),g=!1);b(window).height()-(a.pageY-d)<20?(g&&j==="up"&&(clearInterval(g),g=!1),g||(j="down",g=setInterval(function(){b(document).scrollTop(b(document).scrollTop()+b.vakata.dnd.scroll_spd)},150))):g&&j==="down"&&(clearInterval(g),g=!1);a.pageX-c<20?(f&&h==="right"&&(clearInterval(f),
f=!1),f||(h="left",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()-b.vakata.dnd.scroll_spd)},150))):f&&h==="left"&&(clearInterval(f),f=!1);b(window).width()-(a.pageX-c)<20?(f&&h==="left"&&(clearInterval(f),f=!1),f||(h="right",f=setInterval(function(){b(document).scrollLeft(b(document).scrollLeft()+b.vakata.dnd.scroll_spd)},150))):f&&h==="right"&&(clearInterval(f),f=!1)}b.vakata.dnd.helper.css({left:a.pageX+b.vakata.dnd.helper_left+"px",top:a.pageY+b.vakata.dnd.helper_top+
"px"});b(document).triggerHandler("drag.vakata",{event:a,data:b.vakata.dnd.user_data})}},drag_stop:function(a){f&&clearInterval(f);g&&clearInterval(g);b(document).unbind("mousemove",b.vakata.dnd.drag);b(document).unbind("mouseup",b.vakata.dnd.drag_stop);b(document).triggerHandler("drag_stop.vakata",{event:a,data:b.vakata.dnd.user_data});b.vakata.dnd.helper.remove();b.vakata.dnd.init_x=0;b.vakata.dnd.init_y=0;b.vakata.dnd.user_data={};b.vakata.dnd.is_down=!1;b.vakata.dnd.is_drag=!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});b.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",b.proxy(function(d){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.themes&&(e.attr("class","jstree-"+this.data.themes.theme),c&&c.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
d.currentTarget===d.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==d.target&&(d=b.jstree._reference(d.target),d.data.dnd.foreign?(d=d._get_settings().dnd.drag_check.call(this,{o:a,r:d.get_container(),is_root:!0}),(d===!0||d.inside===!0||d.before===!0||d.after===!0)&&b.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(d.prepare_move(a,d.get_container(),"last"),d.check_move()&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",b.proxy(function(d){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&d.currentTarget===d.target&&b.vakata.dnd.user_data.obj&&b(b.vakata.dnd.user_data.obj).length&&b(b.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==d.target){var c=b.jstree._reference(d.currentTarget);c.data.dnd.foreign?(d=c._get_settings().dnd.drag_check.call(this,{o:a,r:c.get_container(),is_root:!0}),(d===!0||d.inside===!0||d.before===!0||d.after===!0)&&c._get_settings().dnd.drag_finish.call(this,
{o:a,r:c.get_container(),is_root:!0})):c.move_node(a,c.get_container(),"last",d[c._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",b.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&a.relatedTarget.id==="jstree-marker-line")return!1;b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){var d=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft+=b.vakata.dnd.scroll_spd},d),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(b.proxy(function(){this.scrollLeft-=b.vakata.dnd.scroll_spd},d),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop+=b.vakata.dnd.scroll_spd},d),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(b.proxy(function(){this.scrollTop-=
b.vakata.dnd.scroll_spd},d),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",b.proxy(function(){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&e&&c&&(e.hide(),c.hide())},this)).delegate("a","mousedown.jstree",b.proxy(function(a){if(a.which===1)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a","mousemove.jstree",
b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){(!d||!d.length||d.children("a")[0]!==a.currentTarget)&&this.dnd_enter(a.currentTarget);if(typeof this.data.dnd.off.top==="undefined")this.data.dnd.off=b(a.target).offset();this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height;this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height);this.dnd_show()}},this)).delegate("a","mouseleave.jstree",b.proxy(function(a){if(b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree){if(a.relatedTarget&&
a.relatedTarget.id&&a.relatedTarget.id==="jstree-marker-line")return!1;e&&e.hide();c&&c.hide();this.data.dnd.mto=setTimeout(function(b){return function(){b.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",b.proxy(function(a){b.vakata.dnd.is_drag&&b.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));b(document).bind("drag_stop.vakata",b.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;e&&e.css({top:"-2000px"});c&&c.css({top:"-2000px"})},this)).bind("drag_start.vakata",b.proxy(function(a,d){if(d.data.jstree){var c=b(d.event.target);c.closest(".jstree").hasClass("jstree-"+
this.get_index())&&this.dnd_enter(c)}},this));var f=this._get_settings().dnd;f.drag_target&&b(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),b.proxy(function(d){a=d.target;b.vakata.dnd.drag_start(d,{jstree:!0,obj:d.target},"<ins class='jstree-icon'></ins>"+b(d.target).text());this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),c&&c.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));
b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;d.preventDefault()},this));f.drop_target&&b(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),b.proxy(function(d){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:b(d.target),e:d})&&b.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),b.proxy(function(){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),b.proxy(function(d){this.data.dnd.active&&b.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:b(d.target),e:d})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:b.noop,drag_target:".jstree-draggable",drag_finish:b.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(d&&d.length){this.data.dnd.off=d.offset();if(this._get_settings().core.rtl)this.data.dnd.off.right=this.data.dnd.off.left+d.width();if(this.data.dnd.foreign){var b=this._get_settings().dnd.drag_check.call(this,{o:a,r:d});this.data.dnd.after=b.after;this.data.dnd.before=b.before;this.data.dnd.inside=
b.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,d,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,d,"after");this.data.dnd.after=this.check_move();this._is_loaded(d)?(this.prepare_move(a,d,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],d=!1,f=this._get_settings().core.rtl,a=this.data.dnd.w<
this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=this.data.core.li_height*2/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];b.each(a,b.proxy(function(a,c){if(this.data.dnd[c])return b.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),d=c,!1},this));d===!1&&b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(d){case "before":e.css({left:a+
"px",top:this.data.dnd.off.top-6+"px"}).show();c&&c.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":e.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();c&&c.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":e.css({left:a+(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();c&&c.hide();break;default:e.hide(),c&&c.hide()}return k=d}},dnd_open:function(){this.data.dnd.to2=
!1;this.open_node(d,b.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(b){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:d,p:k}):(this.dnd_prepare(),this.move_node(a,d,k,b[this._get_settings().dnd.copy_modifier+"Key"]));d=a=!1;e.hide();c&&c.hide()},dnd_enter:function(a){if(this.data.dnd.mto)clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1;var c=this._get_settings().dnd;this.data.dnd.prepared=!1;
d=this._get_node(a);c.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(b.proxy(this.dnd_prepare,this),c.check_timeout)):this.dnd_prepare();if(c.open_timeout){if(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),d&&d.length&&d.hasClass("jstree-closed"))this.data.dnd.to2=setTimeout(b.proxy(this.dnd_open,this),c.open_timeout)}else d&&d.length&&d.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=!1;this.data.dnd.before=
!1;this.data.dnd.inside=!1;b.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");e.hide();c&&c.hide();if(d&&d[0]===a.target.parentNode){if(this.data.dnd.to1)clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1;if(this.data.dnd.to2)clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1}},start_drag:function(d,f){a=this._get_node(d);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var g=a.length>1?this._get_string("multiple_selection"):this.get_text(a),h=this.get_container();
this._get_settings().core.html_titles||(g=g.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));b.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+g);this.data.themes&&(e&&e.attr("class","jstree-"+this.data.themes.theme),c&&c.attr("class","jstree-"+this.data.themes.theme),b.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=h.offset();this.data.dnd.cw=parseInt(h.width(),10);this.data.dnd.ch=parseInt(h.height(),10);this.data.dnd.active=
!0}}});b(function(){b.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});e=b("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){e.hide();c.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");c=b("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(d&&d.length)return d.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=b(a.relatedTarget);if((f.is(".jstree")||f.closest(".jstree").length===
0)&&d&&d.length)return d.children("a").trigger(a),e.hide(),c.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");b(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(e.show(),c&&c.show())});b(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(e.hide(),c&&c.hide())})})})(jQuery);(function(b){b.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;if(this.data.ui&&this.data.checkbox.noui)this.select_node=
this.deselect_node=this.deselect_all=b.noop,this.get_selected=this.get_checked;this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",b.proxy(function(a,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",b.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",b.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(Math.random()*1E4)),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,b){b.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=!a||a==-1?this.get_container().find("> ul > li"):this._get_node(a);if(a!==!1){var d,e=this,c,f=this._get_settings().checkbox.two_state,g=this._get_settings().checkbox.real_checkboxes,j=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){c=b(this);d=c.is("li")&&(c.hasClass("jstree-checked")||g&&c.children(":checked").length)?"jstree-checked":"jstree-unchecked";c.find("li").andSelf().each(function(){var a=
b(this),c;a.children("a"+(e.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":d);g&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(c=j.call(e,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+c[0]+"' name='"+c[0]+"' value='"+c[1]+"' />")),d==="jstree-checked"&&a.children(":checkbox").attr("checked",
"checked"));d==="jstree-checked"&&!f&&a.find("li").addClass("jstree-checked")})});f||(a.length===1&&a.is("li")&&this._repair_state(a),a.is("li")?a.each(function(){e._repair_state(this)}):a.find("> ul > li").each(function(){e._repair_state(this)}),a.find(".jstree-checked").parent().parent().each(function(){e._repair_state(this)}))}},change_state:function(a,d){var a=this._get_node(a),e=!1,c=this._get_settings().checkbox.real_checkboxes;if(!a||a===-1)return!1;d=d===!1||d===!0?d:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)d?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),c&&a.children(":checkbox").removeAttr("checked")):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),c&&a.children(":checkbox").attr("checked","checked"));else{if(d){e=a.find("li").andSelf();if(!e.filter(".jstree-checked, .jstree-undetermined").length)return!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");c&&e.children(":checkbox").removeAttr("checked")}else{e=
a.find("li").andSelf();if(!e.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");c&&e.children(":checkbox").attr("checked","checked");if(this.data.ui)this.data.ui.last_selected=a;this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=b(this);if(d)if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
c&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked"),!1;else a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),c&&a.children(":checkbox").removeAttr("checked");else if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),c&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked"),
!1;else a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),c&&a.children(":checkbox").attr("checked","checked")})}if(this.data.ui&&this.data.checkbox.noui)this.data.ui.selected=this.get_checked();this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var b=this;a.parents(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,b){a=!a||a===-1?this.get_container():this._get_node(a);return b||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,b){a=!a||a===-1?this.get_container():this._get_node(a);return b||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length){var b=this._get_settings().checkbox.real_checkboxes,e=a.find("> ul > .jstree-checked").length,c=a.find("> ul > .jstree-undetermined").length,f=a.find("> ul > li").length;f===0?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):e===0&&c===
0?this.change_state(a,!0):e===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),b&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").removeAttr("checked"))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=this,d=this.data.ui.to_select,d=b.map(b.makeArray(d),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:")});this.deselect_all();b.each(d,function(b,d){a.check_node(d)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});b(function(){b.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(b){b.vakata.xslt=function(a,d,f){var g=
"",j;if(document.recalc)return j=document.createElement("xml"),g=document.createElement("xml"),j.innerHTML=a,g.innerHTML=d,b("body").append(j).append(g),setTimeout(function(a,d,c){return function(){c.call(null,a.transformNode(d.XMLDocument));setTimeout(function(a,d){return function(){b(a).remove();b(d).remove()}}(a,d),200)}}(j,g,f),100),!0;typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor==="undefined"&&(a=(new DOMParser).parseFromString(a,
"text/xml"),d=(new DOMParser).parseFromString(d,"text/xml"));if(typeof window.DOMParser!=="undefined"&&typeof window.XMLHttpRequest!=="undefined"&&typeof window.XSLTProcessor!=="undefined"){j=new XSLTProcessor;g=b.isFunction(j.transformDocument)?typeof window.XMLSerializer!=="undefined":!0;if(!g)return!1;a=(new DOMParser).parseFromString(a,"text/xml");d=(new DOMParser).parseFromString(d,"text/xml");b.isFunction(j.transformDocument)?(g=document.implementation.createDocument("","",null),j.transformDocument(a,
d,g,null),f.call(null,(new XMLSerializer).serializeToString(g))):(j.importStylesheet(d),g=j.transformToFragment(a,document),f.call(null,b("<div />").append(g).html()));return!0}return!1};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
d=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};b.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,d){var g=this;this.load_node_xml(a,function(){g.__callback({obj:g._get_node(a)});b.call(this)},d)},_is_loaded:function(a){var d=this._get_settings().xml_data,a=this._get_node(a);return a==-1||
!a||!d.ajax&&!b.isFunction(d.data)||a.is(".jstree-open, .jstree-leaf")||a.children("ul").children("li").size()>0},load_node_xml:function(a,d,f){var g=this.get_settings().xml_data,j=function(){},h=function(){};if((a=this._get_node(a))&&a!==-1)if(a.data("jstree-is-loading"))return;else a.data("jstree-is-loading",!0);switch(!0){case !g.data&&!g.ajax:throw"Neither data nor ajax settings supplied.";case b.isFunction(g.data):g.data.call(this,a,b.proxy(function(f){this.parse_xml(f,b.proxy(function(f){f&&
(f=f.replace(/ ?xmlns="[^"]*"/ig,""),f.length>10?(f=b(f),a===-1||!a?this.get_container().children("ul").empty().append(f.children()):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f),a.removeData("jstree-is-loading")),g.clean_node&&this.clean_node(a),d&&d.call(this)):a&&a!==-1?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),g.correct_state&&(this.correct_state(a),d&&d.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),
d&&d.call(this)))},this))},this));break;case !!g.data&&!g.ajax||!!g.data&&!!g.ajax&&(!a||a===-1):(!a||a==-1)&&this.parse_xml(g.data,b.proxy(function(f){f?(f=f.replace(/ ?xmlns="[^"]*"/ig,""),f.length>10&&(f=b(f),this.get_container().children("ul").empty().append(f.children()),g.clean_node&&this.clean_node(a),d&&d.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !g.data&&!!g.ajax||!!g.data&&!!g.ajax&&a&&a!==-1:j=function(b,d,c){var h=this.get_settings().xml_data.ajax.error;
h&&h.call(this,b,d,c);a!==-1&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),d==="success"&&g.correct_state&&this.correct_state(a)):d==="success"&&g.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)};g.ajax.context=this;g.ajax.error=j;g.ajax.success=function(f,h,m){var f=m.responseText,l=this.get_settings().xml_data.ajax.success;l&&(f=l.call(this,f,h,m)||f);if(f===""||f&&f.toString&&f.toString().replace(/^[\s\n]+$/,
"")==="")return j.call(this,m,h,"");this.parse_xml(f,b.proxy(function(f){f&&(f=f.replace(/ ?xmlns="[^"]*"/ig,""),f.length>10?(f=b(f),a===-1||!a?this.get_container().children("ul").empty().append(f.children()):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f),a.removeData("jstree-is-loading")),g.clean_node&&this.clean_node(a),d&&d.call(this)):a&&a!==-1?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),g.correct_state&&(this.correct_state(a),
d&&d.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this)))},this))};if(!g.ajax.dataType)g.ajax.dataType="xml";if(b.isFunction(g.ajax.url))g.ajax.url=g.ajax.url.call(this,a);if(b.isFunction(g.ajax.data))g.ajax.data=g.ajax.data.call(this,a);b.ajax(g.ajax)}},parse_xml:function(d,c){var f=this._get_settings().xml_data;b.vakata.xslt(d,a[f.xsl],c)},get_xml:function(a,c,f,g,j){var h="",k=this._get_settings(),i=this,m,l,n,o,p;a||(a="flat");j||(j=0);c=this._get_node(c);
if(!c||c===-1)c=this.get_container().find("> ul > li");f=b.isArray(f)?f:["id","class"];!j&&this.data.types&&b.inArray(k.types.type_attr,f)===-1&&f.push(k.types.type_attr);g=b.isArray(g)?g:[];j||(k.xml_data.get_include_preamble&&(h+='<?xml version="1.0" encoding="UTF-8"?>'),h+="<root>");c.each(function(){h+="<item";n=b(this);b.each(f,function(a,b){var c=n.attr(b);if(!k.xml_data.get_skip_empty||typeof c!=="undefined")h+=" "+b+'="'+d((" "+(c||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))+'"'});n.hasClass("jstree-open")&&(h+=' state="open"');n.hasClass("jstree-closed")&&(h+=' state="closed"');a==="flat"&&(h+=' parent_id="'+d(j)+'"');h+=">";h+="<content>";o=n.children("a");o.each(function(){m=b(this);p=!1;h+="<name";b.inArray("languages",k.plugins)!==-1&&b.each(k.languages,function(a,b){if(m.hasClass(b))return h+=' lang="'+d(b)+'"',p=b,!1});g.length&&b.each(g,function(a,b){var c=m.attr(b);if(!k.xml_data.get_skip_empty||typeof c!=="undefined")h+=" "+b+'="'+d((" "+
c||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"'});m.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(h+=' icon="'+d(m.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');m.children("ins").get(0).style.backgroundImage.length&&(h+=' icon="'+d(m.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,
"").replace(/"/ig,""))+'"');h+=">";h+="<![CDATA["+i.get_text(m,p)+"]]\>";h+="</name>"});h+="</content>";l=n[0].id||!0;n=n.find("> ul > li");l=n.length?i.get_xml(a,n,f,g,l):"";a=="nest"&&(h+=l);h+="</item>";a=="flat"&&(h+=l)});j||(h+="</root>");return h}}})})(jQuery);(function(b){b.expr[":"].jstree_contains=function(a,b,e){return(a.textContent||a.innerText||"").toLowerCase().indexOf(e[3].toLowerCase())>=0};b.expr[":"].jstree_title_contains=function(a,b,e){return(a.getAttribute("title")||"").toLowerCase().indexOf(e[3].toLowerCase())>=
0};b.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=b();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,d){b(this).children("ul").find("li").hide().removeClass("jstree-last");d.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){b(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){b(this).children("ul").find("li").css("display",
"").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,d){if(b.trim(a)==="")this.clear_search();else{var e=this.get_settings().search,c=this,f=function(){},f=function(){};this.data.search.str=a;if(!d&&e.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0){this.search.supress_callback=!0;e.ajax.context=this;e.ajax.error=function(){};e.ajax.success=function(a,b,d){var c=this.get_settings().search.ajax.success;
c&&(a=c.call(this,a,b,d)||a);this.data.search.to_open=a;this._search_open()};if(b.isFunction(e.ajax.url))e.ajax.url=e.ajax.url.call(this,a);if(b.isFunction(e.ajax.data))e.ajax.data=e.ajax.data.call(this,a);if(!e.ajax.data)e.ajax.data={search_string:a};if(!e.ajax.dataType||/^json/.exec(e.ajax.dataType))e.ajax.dataType="json";b.ajax(e.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+
e.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){c.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=b()},_search_open:function(){var a=this,d=!0,e=[],c=[];if(this.data.search.to_open.length&&(b.each(this.data.search.to_open,function(a,
d){if(d=="#")return!0;b(d).length&&b(d).is(".jstree-closed")?e.push(d):c.push(d)}),e.length))this.data.search.to_open=c,b.each(e,function(b,d){a.open_node(d,function(){a._search_open(!0)})}),d=!1;d&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(b){b.vakata.context={hide_on_mouseleave:!1,cnt:b("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,d,e,c,f,g,j){b.vakata.context.rtl=!!j;if(a=b.vakata.context.parse(a)){b.vakata.context.vis=!0;b.vakata.context.tgt=
d;b.vakata.context.par=g||d||null;b.vakata.context.data=f||null;b.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(b.vakata.context.hide_on_mouseleave)b.vakata.context.cnt.one("mouseleave",function(){b.vakata.context.hide()});f=b.vakata.context.cnt.height();g=b.vakata.context.cnt.width();e+g>b(document).width()&&(e=b(document).width()-(g+5),b.vakata.context.cnt.find("li > ul").addClass("right"));c+f>b(document).height()&&(c-=f+d[0].offsetHeight,b.vakata.context.cnt.find("li > ul").addClass("bottom"));
b.vakata.context.cnt.css({left:e,top:c}).find("li:has(ul)").bind("mouseenter",function(){var a=b(document).width(),d=b(document).height(),c=b(this).children("ul").show();a!==b(document).width()&&c.toggleClass("right");d!==b(document).height()&&c.toggleClass("bottom")}).bind("mouseleave",function(){b(this).children("ul").hide()}).end().css({visibility:"visible"}).show();b(document).triggerHandler("context_show.vakata")}},hide:function(){b.vakata.context.vis=!1;b.vakata.context.cnt.attr("class","").css({visibility:"hidden"});
b(document).triggerHandler("context_hide.vakata")},parse:function(a,d){if(!a)return!1;var e="",c=!1,f=!0;if(!d)b.vakata.context.func={};e+="<ul>";b.each(a,function(a,d){if(!d)return!0;b.vakata.context.func[a]=d.action;!f&&d.separator_before&&(e+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;e+="<li class='"+(d._class||"")+(d._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";d.icon&&d.icon.indexOf("/")===-1&&(e+=" class='"+d.icon+"' ");d.icon&&d.icon.indexOf("/")!==-1&&(e+=
" style='background:url("+d.icon+") center center no-repeat;' ");e+=">&#160;</ins><a href='#' rel='"+a+"'>";d.submenu&&(e+="<span style='float:"+(b.vakata.context.rtl?"left":"right")+";'>&raquo;</span>");e+=d.label+"</a>";d.submenu&&(c=b.vakata.context.parse(d.submenu,!0))&&(e+=c);e+="</li>";d.separator_after&&(e+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});e=e.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");e+="</ul>";b(document).triggerHandler("context_parse.vakata");
return e.length>10?e:!1},exec:function(a){return b.isFunction(b.vakata.context.func[a])?(b.vakata.context.func[a].call(b.vakata.context.data,b.vakata.context.par),!0):!1}};b(function(){b.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});b.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(){!b(this).parent().hasClass("jstree-contextmenu-disabled")&&b.vakata.context.exec(b(this).attr("rel"))?b.vakata.context.hide():b(this).blur()}).delegate("a","mouseover",function(){b.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");b(document).bind("mousedown",function(a){b.vakata.context.vis&&!b.contains(b.vakata.context.cnt[0],a.target)&&
b.vakata.context.hide()});typeof b.hotkeys!=="undefined"&&b(document).bind("keydown","up",function(a){if(b.vakata.context.vis){var d=b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();d.length||(d=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());d.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(b.vakata.context.vis){var d=
b.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();d.length||(d=b.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());d.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){b.vakata.context.vis&&(b.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){b.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){b.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});b.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",b.proxy(function(a){a.preventDefault();b(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",b.proxy(function(){this.data.contextmenu&&b.vakata.context.hide()},this)).bind("destroy.jstree",b.proxy(function(){this.data.contextmenu&&b.vakata.context.hide()},this));b(document).bind("context_hide.vakata",b.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,d,e){var a=this._get_node(a),c=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)"),g=!1,g=!1;c.select_node&&this.data.ui&&!this.is_selected(a)&&(this.deselect_all(),this.select_node(a,!0));
if(c.show_at_node||typeof d==="undefined"||typeof e==="undefined")g=f.offset(),d=g.left,e=g.top+this.data.core.li_height;g=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:c.items;b.isFunction(g)&&(g=g.call(this,a));this.data.contextmenu=!0;b.vakata.context.show(g,f,d,e,this,a,this._get_settings().core.rtl);this.data.themes&&b.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(b){b.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",b.proxy(function(){var d=a.type_attr,e="",c=this;b.each(a.types,function(a,g){b.each(g,function(a){/^(max_depth|max_children|icon|valid_children)$/.test(a)||c.data.types.attach_to.push(a)});if(!g.icon)return!0;if(g.icon.image||g.icon.position)e+=a=="default"?".jstree-"+c.get_index()+" a > .jstree-icon { ":".jstree-"+c.get_index()+" li["+d+'="'+a+'"] > a > .jstree-icon { ',g.icon.image&&(e+=" background-image:url("+
g.icon.image+"); "),e+=g.icon.position?" background-position:"+g.icon.position+"; ":" background-position:0 0; ",e+="} "});e!==""&&b.vakata.css.add_sheet({str:e,title:"jstree-types"})},this)).bind("before.jstree",b.proxy(function(a,e){var c,f;if((c=(c=this._get_settings().types.use_data?this._get_node(e.args[0]):!1)&&c!==-1&&c.length?c.data("jstree"):!1)&&c.types&&c.types[e.func]===!1)return a.stopImmediatePropagation(),!1;if(b.inArray(e.func,this.data.types.attach_to)!==-1&&e.args[0]&&(e.args[0].tagName||
e.args[0].jquery))if(c=this._get_settings().types.types,f=this._get_type(e.args[0]),(c[f]&&typeof c[f][e.func]!=="undefined"||c["default"]&&typeof c["default"][e.func]!=="undefined")&&this._check(e.func,e.args[0])===!1)return a.stopImmediatePropagation(),!1},this));o&&this.get_container().bind("load_node.jstree set_type.jstree",b.proxy(function(a,e){var c=e&&e.rslt&&e.rslt.obj&&e.rslt.obj!==-1?this._get_node(e.rslt.obj).parent():this.get_container_ul(),f=!1,g=this._get_settings().types;b.each(g.types,
function(a,b){if(b.icon&&(b.icon.image||b.icon.position))f=a==="default"?c.find("li > a > .jstree-icon"):c.find("li["+g.type_attr+"='"+a+"'] > a > .jstree-icon"),b.icon.image&&f.css("backgroundImage","url("+b.icon.image+")"),f.css("backgroundPosition",b.icon.position||"0 0")})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,b){b.type&&this._get_settings().types.use_data&&
this.set_type(b.type,a)},_get_type:function(a){a=this._get_node(a);return!a||!a.length?!1:a.attr(this._get_settings().types.type_attr)||"default"},set_type:function(a,b){var b=this._get_node(b),e=!b.length||!a?!1:b.attr(this._get_settings().types.type_attr,a);e&&this.__callback({obj:b,type:a});return e},_check:function(a,d,e){var d=this._get_node(d),c=!1,f=this._get_type(d),g=0,j=this,h=this._get_settings().types,k=!1;if(d===-1)if(h[a])c=h[a];else return;else{if(f===!1)return;(k=h.use_data?d.data("jstree"):
!1)&&k.types&&typeof k.types[a]!=="undefined"?c=k.types[a]:h.types[f]&&typeof h.types[f][a]!=="undefined"?c=h.types[f][a]:h.types["default"]&&typeof h.types["default"][a]!=="undefined"&&(c=h.types["default"][a])}b.isFunction(c)&&(c=c.call(this,d));a==="max_depth"&&d!==-1&&e!==!1&&h.max_depth!==-2&&c!==0&&d.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(h.max_depth!==-1&&h.max_depth-(b+1)<=0)return c=0,!1;g=b===0?c:j._check(a,this,!1);if(g!==-1&&g-(b+1)<=0)return c=0,!1;if(g>=
0&&(g-(b+1)<c||c<0))c=g-(b+1);if(h.max_depth>=0&&(h.max_depth-(b+1)<c||c<0))c=h.max_depth-(b+1)});return c},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),d=a.rt._get_settings().types,e=a.rt._check("max_children",a.cr),c=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),g=0,j=1;if(f==="none")return!1;if(b.isArray(f)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(b.inArray(a.ot._get_type(this),f)===-1)return j=!1}),j===!1))return!1;if(d.max_children!==
-2&&e!==-1&&(g=a.cr===-1?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,g+a.o.length>e))return!1;if(d.max_depth!==-2&&c!==-1){j=0;if(c===0)return!1;if(typeof a.o.d==="undefined"){for(d=a.o;d.length>0;)d=d.find("> ul > li"),j++;a.o.d=j}if(c-a.o.d<0)return!1}return!0},create_node:function(a,d,e,c,f,g){if(!g&&(f||this._is_loaded(a))){var j=typeof d=="string"&&d.match(/^before|after$/i)&&a!==-1?this._get_parent(a):this._get_node(a),h=this._get_settings().types,
k=this._check("max_children",j),i=this._check("max_depth",j),m=this._check("valid_children",j);typeof e==="string"&&(e={data:e});e||(e={});if(m==="none")return!1;if(b.isArray(m))if(!e.attr||!e.attr[h.type_attr]){if(!e.attr)e.attr={};e.attr[h.type_attr]=m[0]}else if(b.inArray(e.attr[h.type_attr],m)===-1)return!1;if(h.max_children!==-2&&k!==-1&&(j=j===-1?this.get_container().find("> ul > li").length:j.find("> ul > li").length,j+1>k))return!1;if(h.max_depth!==-2&&i!==-1&&i-1<0)return!1}return this.__call_old(!0,
a,d,e,c,f,g)}}})})(jQuery);(function(b){b.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return this.nodeType==3}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,b,e){var c=this;this.load_node_html(a,function(){c.__callback({obj:c._get_node(a)});b.call(this)},e)},_is_loaded:function(a){a=
this._get_node(a);return a==-1||!a||!this._get_settings().html_data.ajax&&!b.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||a.children("ul").children("li").size()>0},load_node_html:function(a,d,e){var c,f=this.get_settings().html_data,g=function(){};c=function(){};if((a=this._get_node(a))&&a!==-1)if(a.data("jstree-is-loading"))return;else a.data("jstree-is-loading",!0);switch(!0){case b.isFunction(f.data):f.data.call(this,a,b.proxy(function(c){c&&c!==""&&c.toString&&
c.toString().replace(/^[\s\n]+$/,"")!==""?(c=b(c),c.is("ul")||(c=b("<ul />").append(c)),a==-1||!a?this.get_container().children("ul").empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||
!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree-is-loading")),this.clean_node(a),d&&d.call(this)):a&&a!==-1?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),f.correct_state&&(this.correct_state(a),d&&d.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))},
this));break;case !f.data&&!f.ajax:if(!a||a==-1)this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();d&&d.call(this);break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||a===-1):if(!a||
a==-1)c=b(f.data),c.is("ul")||(c=b("<ul />").append(c)),this.get_container().children("ul").empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node();d&&d.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&a!==-1:a=this._get_node(a);g=function(b,
d,c){var g=this.get_settings().html_data.ajax.error;g&&g.call(this,b,d,c);a!=-1&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),d==="success"&&f.correct_state&&this.correct_state(a)):d==="success"&&f.correct_state&&this.get_container().children("ul").empty();e&&e.call(this)};f.ajax.context=this;f.ajax.error=g;f.ajax.success=function(c,e,k){var i=this.get_settings().html_data.ajax.success;i&&(c=i.call(this,c,e,k)||c);if(c===""||c&&c.toString&&
c.toString().replace(/^[\s\n]+$/,"")==="")return g.call(this,k,e,"");c?(c=b(c),c.is("ul")||(c=b("<ul />").append(c)),a==-1||!a?this.get_container().children("ul").empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"):(a.children("a.jstree-loading").removeClass("jstree-loading"),
a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||this.firstChild.tagName!=="INS"}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree-is-loading")),this.clean_node(a),d&&d.call(this)):a&&a!==-1?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree-is-loading"),f.correct_state&&(this.correct_state(a),d&&
d.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),d&&d.call(this))};if(!f.ajax.dataType)f.ajax.dataType="html";if(b.isFunction(f.ajax.url))f.ajax.url=f.ajax.url.call(this,a);if(b.isFunction(f.ajax.data))f.ajax.data=f.ajax.data.call(this,a);b.ajax(f.ajax)}}}});b.jstree.defaults.plugins.push("html_data")})(jQuery);(function(b){b.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a",
"mouseenter.jstree",function(d){b(d.currentTarget).hasClass("jstree-loading")||b(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){b(this).removeClass(a.item_h)}).bind("init.jstree",b.proxy(function(a,b){b.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(b.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",
b.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.obj)},this)).bind("delete_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.parent)},this)).bind("correct_state.jstree",b.proxy(function(b,e){e.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,
"").indexOf("ui-icon-")===-1}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",b.proxy(function(b,e){e.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",b.proxy(function(){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",b.proxy(function(b,e){e.rslt.obj.children("a").removeClass(a.item_h)},
this)).bind("hover_node.jstree",b.proxy(function(b,e){this.get_container().find("a."+a.item_h).not(e.rslt.obj).removeClass(a.item_h);e.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",b.proxy(function(a,b){this._themeroller(b.rslt.o);this._themeroller(b.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,d=["ui-icon"];b.each(a,function(a,b){b=b.split(" ");b.length&&(d=d.concat(b))});this.get_container().removeClass("ui-widget-content").find("."+d.join(", .")).removeClass(d.join(" "))},
_fn:{_themeroller:function(a){var b=this._get_settings().themeroller,a=!a||a==-1?this.get_container_ul():this._get_node(a).parent();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(b.item_leaf+" "+
b.item_open).addClass(b.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(b.item_leaf+" "+b.item_clsd).addClass(b.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(b.closed+
" ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(b.item_clsd+" "+b.item_open).addClass(b.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",
item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});b(function(){b.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(b){b.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",b.proxy(function(a,d){var e=[],c=!0,f;d.func=="move_node"&&d.args[4]===!0&&d.args[0].o&&d.args[0].o.length&&(d.args[0].o.children("a").each(function(){e.push(b(this).text().replace(/^\s+/g,
""))}),c=this._check_unique(e,d.args[0].np.find("> ul > li").not(d.args[0].o),"move_node"));if(d.func=="create_node"&&(d.args[4]||this._is_loaded(d.args[0]))){c=this._get_node(d.args[0]);if(d.args[1]&&(d.args[1]==="before"||d.args[1]==="after"))if(c=this._get_parent(d.args[0]),!c||c===-1)c=this.get_container();typeof d.args[2]==="string"?e.push(d.args[2]):!d.args[2]||!d.args[2].data?e.push(this._get_string("new_node")):e.push(d.args[2].data);c=this._check_unique(e,c.find("> ul > li"),"create_node")}if(d.func==
"rename_node"){e.push(d.args[1]);f=this._get_node(d.args[0]);c=this._get_parent(f);if(!c||c===-1)c=this.get_container();c=this._check_unique(e,c.find("> ul > li").not(f),"rename_node")}if(!c)return a.stopPropagation(),!1},this))},defaults:{error_callback:b.noop},_fn:{_check_unique:function(a,d,e){var c=[];d.children("a").each(function(){c.push(b(this).text().replace(/^\s+/g,""))});if(!c.length||!a.length)return!0;c=c.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,
"").split(",");if(c.length+a.length!=c.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length)return this._get_settings().unique.error_callback.call(null,a,d,e),!1;return!0},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),d=[];if(a.o&&a.o.length)return a.o.children("a").each(function(){d.push(b(this).text().replace(/^\s+/g,""))}),this._check_unique(d,a.np.find("> ul > li").not(a.o),"check_move");
return!0}}})})(jQuery);(function(b){b.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",b.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",b.proxy(function(a,b){this._prepare_wholerow_span(b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",
b.proxy(function(a,b){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",b.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",b.proxy(function(a,d){d.rslt.obj.each(function(){d.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((b(this).offset().top-d.inst.get_container().offset().top+d.inst.get_container()[0].scrollTop)/d.inst.data.core.li_height,10)+")").children("a").attr("class",d.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",b.proxy(function(a,b){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));a.type==="hover_node"&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+
parseInt((b.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var d=b(a.currentTarget);a.target.tagName==="A"||a.target.tagName==="INS"&&d.closest("li").is(".jstree-open, .jstree-closed")||(d.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li",
"mouseover.jstree",b.proxy(function(a){a.stopImmediatePropagation();if(b(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",b.proxy(function(a){b(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(p||o)&&b.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();
this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=!a||a==-1?this.get_container().find("> ul > li"):this._get_node(a);a!==!1&&a.each(function(){b(this).find("li").andSelf().each(function(){var a=b(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("<span class='jstree-wholerow-span' style='width:"+a.parentsUntil(".jstree","li").length*18+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),
b=a.html();a.addClass("jstree-wholerow-real");if(this.data.wholerow.last_html!==b)this.data.wholerow.last_html=b,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",(a.height()+(p?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end())}}});b(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
q&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(p||o)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";b.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(b){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],d=function(a,c){var d=!0,a=a||{},c=[].concat(c);b.each(c,function(c,j){if(!b.isFunction(a[j]))return d=!1});return d};b.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,c){var f=e==-1?this._get_settings().model.object:e.data("jstree_model");if(!d(f,a))return c.call(null,!1);this._get_settings().model.async?f.getChildren(b.proxy(function(a){this.model_done(a,
c)},this)):this.model_done(f.getChildren(),c)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,c){var d=[],g=this._get_settings(),j=this;b.isArray(a)||(a=[a]);b.each(a,function(a,c){var e=c.getProps()||{};e.attr=c.getAttr()||{};if(c.getChildrenCount())e.state="closed";e.data=c.getName();if(!b.isArray(e.data))e.data=[e.data];j.data.types&&b.isFunction(c.getType)&&(e.attr[g.types.type_attr]=c.getType());if(e.attr.id&&g.model.id_prefix)e.attr.id=g.model.id_prefix+e.attr.id;if(!e.metadata)e.metadata=
{};e.metadata.jstree_model=c;d.push(e)});c.call(null,d)}}})})(jQuery)}})();
